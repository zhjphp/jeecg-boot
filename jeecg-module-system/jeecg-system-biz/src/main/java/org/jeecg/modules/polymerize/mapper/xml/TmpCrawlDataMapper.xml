<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jeecg.modules.polymerize.mapper.TmpCrawlDataMapper">

    <select id="queryTmpCrawlData" resultType="org.jeecg.modules.polymerize.entity.TmpCrawlData">
        SELECT
            *
            FROM polymerize_tmp_crawl_data
            WHERE 1=1
        <if test='informationSourceName != null and informationSourceName != ""'>
            AND informationSource_name = #{informationSourceName}
        </if>
        <if test='informationSourceDomain != null and informationSourceDomain != ""'>
            AND informationSource_domain = #{informationSourceDomain}
        </if>
        <if test='topic != null and topic != ""'>
            AND topic = #{topic}
        </if>
        <if test='informationsourceid != null and informationsourceid != ""'>
            AND informationsourceid = #{informationsourceid}
        </if>
        <if test='taskid != null and taskid != ""'>
            AND taskid = #{taskid}
        </if>
        <if test='errorCode != null and errorCode != ""'>
            AND error_code = #{errorCode}
        </if>
        <if test='startCreateTime != null and startCreateTime != ""'>
            <![CDATA[
            AND create_time >= str_to_date( #{startCreateTime},'%Y-%m-%d %H:%i:%s')
            ]]>
        </if>
        <if test='endCreateTime != null and endCreateTime != ""'>
            <![CDATA[
            AND create_time <= str_to_date( #{endCreateTime},'%Y-%m-%d %H:%i:%s')
            ]]>
        </if>
        <if test='customTagList != null and customTagList.size > 0'>
            AND
            <foreach collection="customTagList" item="item" separator="AND">
                find_in_set(#{item}, custom_tags)
            </foreach>
        </if>
    </select>

</mapper>